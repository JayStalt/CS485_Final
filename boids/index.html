<!DOCTYPE html>
<html>
<head>
    <script src="https://code.jquery.com/jquery-3.7.1.js" integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.7.2/p5.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.7.2/addons/p5.dom.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.7.2/addons/p5.sound.min.js"></script>

    <script src="js/sprite.js"></script>

</head>
<body style="">

<canvas id='mycanvas' style="">
</canvas>

<style>
    canvas{
        display: block;
    }
    body {
        /*height: 100%;*/
        /*background-image: url("imgs/titleScreen.png");  !* DISABLE TITLE*!*/
        margin: 0;
        background-position: left top;
        background-repeat: no-repeat;
        background-size: cover, contain, auto;
        background-color: #ffffff;
        /*overflow: hidden;*/
    }

    /*Buttons*/
    .button {
        display: inline-block;
        padding: 1px 15px;
        font-size: 50px;
        cursor: crosshair;
        text-align: center;
        text-decoration: none;
        outline: none;
        color: #fffeb4;
        border: none;
        border-radius: 15px;
        box-shadow: 0 9px rgba(0, 45, 246, 0.32);
        margin: 8px 20px 8px 8px;
    }
    .button:active {
        background-color: #3e8e41;
        box-shadow: 0 5px rgba(59, 161, 0, 0.27);
        transform: translateY(4px);
    }
    .button9 {
        background-color: #2b9872;
        box-shadow: 0 9px #0b3d0a;
        width: 100%;
        height: 100%;
    }
    .button9:hover {
        background-color: #2E86AB !important;
    }
    .start_game {
        position: relative;
        background-position: left top;
        background-repeat: no-repeat;
        background-size: contain;
        box-sizing: content-box;
        width: 100%;
        height: 100%;
    }
    .start_game_button {
        position: fixed;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
        width: 400px;
        height: 60px;
    }

    /* DEBUG SLIDERS */
    .boxy {
        /*background-image: url("imgs/box_texture_3.jpeg");*/
        background-position: center center;
        position: absolute;
        top: 0px;
        left: 50%;
        transform: translate3d(-50%, 0, 0);
        width: fit-content;
        z-index: 0;
        background-size: cover, contain, auto;
        border: 2px solid #ff0c0c;
        padding: 8px;
        background-color: rgba(248, 182, 182, 0.4);
    }
</style>

<div id="main" style="display:none">
    <div class="start_game">
        <div class="start_game_button">
            <button class="button button9" id="but_y"></button>
        </div>
    </div>
</div>
<div class="boxy">
    <h3>PLAYER 1 SCORE:</h3>
    <p>Total: <span id="playerOneScore"></span></p>
</div>

<script>
    const canvas = document.querySelector("canvas");
    const sprites_to_draw = new Array(3);
    var draw_loop_timeout;
    var img = new Image();

    var imageCache = {};

    sprites_to_draw[0] = new Array(0); //background and
    sprites_to_draw[1] = new Array(0); //boids and
    sprites_to_draw[2] = new Array(0); //foreground

    var currSprite = 'idle';
    var keyChanged = false;

    const numBoids = 400;

    let alignSlider, cohesionSlider, separationSlider;  // DEBUG SLIDERS

    let alignFactor = 25
    let separationFactor = 50
    let cohesionFactor = 50
    let mForce = 0.1
    let mSpeed = 5

    let mapTransition = false;
    var currBackground = 'center';
    let prev_Background = 'center';

    // setTimeout(function () {                                                               // DISABLE TITLE
    //     $('.button').prop('disabled', true); // Disable button until loading finished      // DISABLE TITLE
    //     $('.button').text("LOADING");                                                      // DISABLE TITLE
    //     $('#but_y').css('background-color', '#b60000');                                    // DISABLE TITLE
    //                                                                                        // DISABLE TITLE
    //     // Display 'Start Game' Button                                                     // DISABLE TITLE
    //     $('#main').show();                                                                 // DISABLE TITLE
    //                                                                                        // DISABLE TITLE
    //     // initializeGame();                                                               // DISABLE TITLE
    // }, 2);                                                                                 // DISABLE TITLE

    function setup(){

        //Note: PLAYER SPRITES
        $.getJSON( "../Penguins/animationData.json", function( data ) {
            console.log("============== STARTING ==============");
            sprites_to_draw[2].push( new Sprite(data, Math.round(window.innerWidth/2) , Math.round(window.innerHeight/2), currSprite, true) );
        });

        //Note: BOID SPRITES
        $.getJSON( "../Boid/animationData.json", function( data ) {
            console.log("============== STARTING ==============");
            for(let i = 0; i < numBoids; i++)
            {
                sprites_to_draw[1].push( new Boid(data, 4 , 4, 'lazy', true) );
            }
        });

        //Note: BACKGROUND SPRITES
        $.getJSON( "../Background/animationData.json", function( data ) {
            sprites_to_draw[0].push( new BackgroundSprite(data, currBackground) );
        });
        gameStarted('game_started');

        // setTimeout(function () {                                           // DISABLE TITLE
        //     $('.button').text("START GAME");                               // DISABLE TITLE
        //     $('#but_y').css('background-color', '#43b209');                // DISABLE TITLE
        //     $('.button').prop('disabled', false);                          // DISABLE TITLE
        //     // $('.button').show();                                        // DISABLE TITLE
        // }, 20);                                                            // DISABLE TITLE
    }
    function debuggingOutput(message, color) {
        console

.log("%c " + message, "background-color:" + color + ";color:white;");
    }

    function Boid(sprite_json, x, y, start_state, _noDraw)
    {
        Sprite.call(this, sprite_json, x, y, start_state, _noDraw);
        this.wanderTheta = 0;
        this.isMoving = false;
    }

    Boid.prototype = Object.create(Sprite.prototype);

    Boid.prototype.flock = function(_boids)
    {
        let align = this.align(_boids);
        let separation = this.separation(_boids);
        let cohesion = this.cohesion(_boids);
        this.acceleration.add(align);
        this.acceleration.add(separation);
        this.acceleration.add(cohesion);
    };

    Boid.prototype.updatePosition = function() {
        this.velocity.add(this.acceleration);
        this.velocity.limit(mSpeed);
        this.position.add(this.velocity);
        this.acceleration.mult(0);
    };

    Boid.prototype.align = function(_boids)
    {
        let sum = createVector(0,0);
        let count = 0;
        for(let boid of _boids)
        {
            let d = dist(this.position.x, this.position.y, boid.position.x, boid.position.y);
            if(d > 0 && d < alignSlider.value() )
            {
                sum.add(boid.velocity);
                count++;
            }
        }

        if(count > 0)
        {
            sum.div(count);
            sum.setMag(mSpeed);
            let steer = p5.Vector.sub(sum, this.velocity);
            steer.limit(mForce);
            return steer;
        }
        else
            return createVector(0,0);
    };

    Boid.prototype.separation = function(_boids)
    {
        let desiredSeparation = separationSlider.value();
        let steer = createVector(0,0);
        let count = 0;
        for(let boid of _boids)
        {
            let d = dist(this.position.x, this.position.y, boid.position.x, boid.position.y);
            if(d > 0 && d < desiredSeparation )
            {
                let diff = p5.Vector.sub(this.position, boid.position);
                diff.normalize();
                diff.div(d);
                steer.add(diff);
                count++;
            }
        }

        if(count > 0)
        {
            steer.div(count);
        }

        if(steer.mag() > 0)
        {
            steer.setMag(mSpeed);
            steer.sub(this.velocity);
            steer.limit(mForce);
        }
        return steer;
    };

    Boid.prototype.cohesion = function(_boids)
    {
        let neighborDist = cohesionSlider.value();
        let sum = createVector(0,0);
        let count = 0;
        for(let boid of _boids)
        {
            let d = dist(this.position.x, this.position.y, boid.position.x, boid.position.y);
            if(d > 0 && d < neighborDist)
            {
                sum.add(boid.position);
                count++;
            }
        }
        if(count > 0)
        {
            sum.div(count);
            return this.seek(sum);
        }
        else
        {
            return createVector(0,0);
        }
    };

    Boid.prototype.seek = function(target)
    {
        let desired = p5.Vector.sub(target, this.position);
        desired.setMag(mSpeed);
        let steer = p5.Vector.sub(desired, this.velocity);
        steer.limit(mForce);
        return steer;
    };

    function BackgroundSprite(sprite_json, start_state)
    {
        Sprite.call(this, sprite_json, 0, 0, start_state);
        // this.wanderTheta = 0;
    }

    BackgroundSprite.prototype = Object.create(Sprite.prototype);

    BackgroundSprite.prototype.updatePosition = function()
    {
        if(mapTransition)
        {
            currBackground = sprites_to_draw[0][0].transitionBackround(currBackground);
            sprites_to_draw[0][0] = new BackgroundSprite(imageCache[currBackground], currBackground);
            prev_Background = currBackground;
            mapTransition = false;
        }
    };

    function mouseClicked()
    {
        if(currBackground === 'center')
        {
            currBackground = 'bottom';
            mapTransition = true;
        }
        else if(currBackground === 'bottom')
        {
            currBackground = 'top';
            mapTransition = true;
        }
        else if(currBackground === 'top')
        {
            currBackground = 'center';
            mapTransition = true;
        }
    }

    // Define a Second Player Class similar to Sprite class
    class Player2 extends Sprite {
        constructor(sprite_json, x, y, start_state){
            super(sprite_json, x, y, start_state);
        }

        // Override the updatePosition method to handle movement based on arrow keys
        updatePosition() {
            // Handle movement based on arrow key states
            if (keyStates['ArrowUp']) {
                this.y -= 10;
            }
            if (keyStates['ArrowDown']) {
                this.y += 10;
            }
            if (keyStates['ArrowLeft']) {
                this.x -= 10;
            }
            if (keyStates['ArrowRight']) {
                this.x += 10;
            }

            // Call the parent class method to update position
            super.updatePosition(this.x, this.y);
        }
    }

    // Modify key event listeners to handle controls for both players
    document.addEventListener('keydown', function (event) {
        if (!keyStates[event.key]) {
            keyStates[event.key] = { pressed: true, firstPress: true };
            keyChanged = true;
        }
        // Add arrow key controls for second player
        if (!keyStates[event.key] && ['ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight'].includes(event.key)) {
            keyStates[event.key] = { pressed: true, firstPress: true };
            keyChanged = true;
        }
    });

    // Implement collision detection between the second player and the boids
    sprites_to_draw[2].forEach(boid => {
        sprites_to_draw[1].forEach(sprite => {
            // Check collision between player 2 and boid
            if (checkCollision(player2, boid)) {
                sprites_to_draw[1].splice(sprites_to_draw[1].indexOf(boid), 1);
                player2Score += 1; // Increment player 2 score
            }
        });
    });

    // Adjust the score tracking logic to differentiate between player scores
    var player1Score = 0;
    var player2Score = 0;

    // Update score display for each player
    var displayPlayer1Score = document.getElementById("playerOneScore");
    var displayPlayer2Score = document.getElementById("playerTwoScore");

    // Display scores for both players
    displayPlayer1Score.innerHTML = player1Score;
    displayPlayer2Score.innerHTML = player2Score;

    function preload() {
        // Load image assets here
        img = loadImage('../background.png');
    }

    function setup() {
        createCanvas(window.innerWidth, window.innerHeight);
    }

    function draw() {
        background(img);
    }
</script>
</body>
</html>
```

This includes all the HTML and JavaScript code from your `index.html` file.
